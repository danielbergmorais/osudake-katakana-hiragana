"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9288],{9288:(F,g,l)=>{l.r(g),l.d(g,{DoublePageModule:()=>j});var d=l(2200),b=l(4341),h=l(7343),f=l(8132),m=l(467),C=l(3210),o=l(3664),p=l(2615),v=l(2122),E=l(2551),q=l(1554),x=l(2540);function P(t,c){if(1&t){const a=o.RV6();o.j41(0,"div",11),o.nI1(1,"async"),o.bIt("click",function(){const e=p.eBV(a).$implicit,s=o.XpG(3);return p.Njj(s.selectOptions(e.char))}),o.k0s()}if(2&t){const a=c.$implicit,r=o.XpG(3);o.Aen(o.ai1("background-image: url('assets/",o.bMT(1,13,r.type$),"/glyphs/",a.char,".png');")),o.xc7("top",a.top,"%")("left",a.left,"%"),o.AVh("success",r.selected.includes(a.char))("error",r.selectedError.includes(a.char)),o.Y8G("ngClass",a.color)}}function y(t,c){if(1&t&&(o.qex(0),o.DNE(1,P,2,15,"div",10),o.bVm()),2&t){const a=o.XpG().$implicit;o.R7$(),o.Y8G("ngForOf",a)}}function G(t,c){if(1&t&&(o.j41(0,"div"),o.DNE(1,y,2,1,"ng-container",9),o.k0s()),2&t){const a=c.index,r=o.XpG();o.R7$(),o.Y8G("ngIf",a==r.etapaAtual-1)}}function O(t,c){if(1&t&&(o.j41(0,"h1",12),o.EFF(1),o.k0s()),2&t){const a=o.XpG();o.R7$(),o.JRh(a.romanji)}}const A=[{path:"",component:(()=>{var t;class c{constructor(r,e,s,i){this.router=r,this.helpers=e,this.typeState=s,this.toastController=i,this.selected=[],this.selectedError=[],this.gameOver=!1,this.sequenciasConcluidasNaEtapa=0,this.options=[],this.selectedRed=[],this.selectedBlue=[],this.cardsPorEtapa=[],this.sequencias=[],this.sequenciaCorreta=[],this.sequenciaAtualIndex=0,this.progressoClique=0,this.etapaAtual=1,this.TOTAL_ETAPAS=5,this.romanji="",this.simpleGrid=[[{char:"\u3046",color:"red",row:2,col:1},{char:"\u3042",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:2,col:3},{char:"\u304a",color:"red",row:4,col:1},{char:"\u3044",color:"red",row:4,col:3}],[{char:"\u3051",color:"blue",row:3,col:1},{char:"\u304b",color:"blue",row:5,col:1},{char:"\u304f",color:"blue",row:4,col:3},{char:"\u304d",color:"blue",row:2,col:2},{char:"\u3053",color:"blue",row:6,col:2}],[{char:"\u3046",color:"red",row:3,col:1},{char:"\u304a",color:"red",row:2,col:2},{char:"\u3044",color:"red",row:4,col:2},{char:"\u3042",color:"red",row:5,col:3},{char:"\u3048",color:"red",row:3,col:3}],[{char:"\u3046",color:"red",row:1,col:2},{char:"\u304a",color:"red",row:3,col:3},{char:"\u3044",color:"red",row:3,col:1},{char:"\u3042",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2}],[{char:"\u3046",color:"red",row:2,col:3},{char:"\u304a",color:"red",row:2,col:1},{char:"\u3044",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2},{char:"\u3042",color:"red",row:4,col:1}]],this.doubleGrid=[[{char:"\u3046",color:"red",row:2,col:1},{char:"\u3048",color:"red",row:2,col:3},{char:"\u3042",color:"red",row:3,col:2},{char:"\u304a",color:"red",row:4,col:1},{char:"\u3044",color:"red",row:7,col:2},{char:"\u3053",color:"blue",row:1,col:2},{char:"\u3051",color:"blue",row:6,col:3},{char:"\u304b",color:"blue",row:4,col:3},{char:"\u304f",color:"blue",row:6,col:1},{char:"\u304d",color:"blue",row:5,col:2}],[{char:"\u3051",color:"blue",row:3,col:1},{char:"\u304b",color:"blue",row:5,col:1},{char:"\u3053",color:"blue",row:6,col:2},{char:"\u304d",color:"blue",row:2,col:2},{char:"\u304f",color:"blue",row:3,col:3},{char:"\u3046",color:"red",row:1,col:1},{char:"\u3042",color:"red",row:7,col:1},{char:"\u3048",color:"red",row:4,col:2},{char:"\u3044",color:"red",row:1,col:3},{char:"\u304a",color:"red",row:5,col:3}],[{char:"\u3046",color:"red",row:1,col:1},{char:"\u304a",color:"red",row:2,col:2},{char:"\u3044",color:"red",row:4,col:2},{char:"\u3042",color:"red",row:5,col:3},{char:"\u3048",color:"red",row:3,col:3},{char:"\u3053",color:"blue",row:3,col:1},{char:"\u3051",color:"blue",row:6,col:1},{char:"\u304b",color:"blue",row:6,col:2},{char:"\u304d",color:"blue",row:1,col:3},{char:"\u304f",color:"blue",row:7,col:3}],[{char:"\u3053",color:"blue",row:1,col:1},{char:"\u3051",color:"blue",row:6,col:1},{char:"\u304b",color:"blue",row:1,col:2},{char:"\u304d",color:"blue",row:7,col:2},{char:"\u304f",color:"blue",row:2,col:3},{char:"\u3046",color:"red",row:4,col:1},{char:"\u304a",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2},{char:"\u3044",color:"red",row:4,col:3},{char:"\u3042",color:"red",row:7,col:3}],[{char:"\u3044",color:"red",row:3,col:1},{char:"\u3046",color:"red",row:7,col:3},{char:"\u304a",color:"red",row:1,col:2},{char:"\u3048",color:"red",row:6,col:2},{char:"\u3042",color:"red",row:7,col:1},{char:"\u304d",color:"blue",row:4,col:2},{char:"\u3053",color:"blue",row:2,col:3},{char:"\u3051",color:"blue",row:5,col:3},{char:"\u304b",color:"blue",row:1,col:1},{char:"\u304f",color:"blue",row:5,col:1}]],this.type$=this.typeState.type$}ngOnInit(){this.loadOptions(),this.selectedRed.length&&!this.selectedBlue.length?(this.prepareRedGrid(),this.begin(!0)):(this.prepareGrid(),this.begin(!1))}loadOptions(){const r=localStorage.getItem("options");if(!r)return;this.options=JSON.parse(r);const e=this.options.map(s=>C.S.find(i=>i[0]===s)).filter(s=>!!s);this.selectedRed=e[0]??[],this.selectedBlue=e[1]??[]}prepareRedGrid(){if(!this.selectedRed.length)return;const r=[...this.selectedRed].sort(()=>Math.random()-.5);this.cardsPorEtapa=[],this.simpleGrid.forEach((e,s)=>{const i=e.slice(0,r.length).map((u,n)=>({...u,char:r[n]}));this.cardsPorEtapa[s]=this.generateLayout(i,7,3)})}prepareGrid(){if(!this.selectedRed.length&&!this.selectedBlue.length)return;const r=[...this.selectedRed,...this.selectedBlue].sort(()=>Math.random()-.5);this.cardsPorEtapa=[],this.doubleGrid.forEach((e,s)=>{const i=e.slice(0,r.length).map((u,n)=>{const w=r[n];return{...u,char:w,color:this.selectedRed.includes(w)?"red":"blue"}});this.cardsPorEtapa[s]=this.generateLayout(i,7,3),this.doubleGrid[s].splice(0,this.doubleGrid[s].length,...i)})}generateLayout(r,e,s){const i=100/(e+1),u=100/(s+1);return r.map(n=>({char:n.char,color:n.color,top:Math.round(i*n.row),left:Math.round(u*n.col)}))}begin(r=!1){this.sequencias=[],r?this.sequencias.push(this.selectedRed):(this.sequencias.push(this.selectedRed),this.sequencias.push(this.selectedBlue)),this.sequenciaAtualIndex=0,this.sequenciaCorreta=this.sequencias[0],this.progressoClique=0,this.sequenciasConcluidasNaEtapa=0,this.romanji=this.sequenciaCorreta[this.progressoClique]}clicar(r){this.gameOver||(r===this.sequenciaCorreta[this.progressoClique]?(this.tratarAcerto(r),this.romanji=this.sequenciaCorreta[this.progressoClique]):this.tratarErro(r))}tratarAcerto(r){this.selectedError=[],this.progressoClique++,this.selected.includes(r)||this.selected.push(r),this.selectedError=this.selectedError.filter(e=>e!==r),this.sequenciaCompleta()&&this.avancarSequencia()}tratarErro(r){!this.selected.includes(r)&&!this.selectedError.includes(r)&&this.selectedError.push(r)}sequenciaCompleta(){return this.progressoClique===this.sequenciaCorreta.length}avancarSequencia(){this.sequenciasConcluidasNaEtapa++,this.todasSequenciasConcluidas()?this.finalizarEtapa():(this.progressoClique=0,this.sequenciaAtualIndex=(this.sequenciaAtualIndex+1)%this.sequencias.length,this.sequenciaCorreta=this.sequencias[this.sequenciaAtualIndex])}todasSequenciasConcluidas(){return this.sequenciasConcluidasNaEtapa===this.sequencias.length}finalizarEtapa(){this.etapaAtual!==this.TOTAL_ETAPAS?(this.etapaAtual++,this.resetarEstadoEtapa(),this.resetarControleSequencias()):this.finalizarJogo()}resetarEstadoEtapa(){this.selected=[],this.selectedError=[]}resetarControleSequencias(){this.sequenciasConcluidasNaEtapa=0,this.progressoClique=0,this.sequenciaAtualIndex=0,this.sequenciaCorreta=this.sequencias[0]}finalizarJogo(){var r=this;return(0,m.A)(function*(){r.gameOver=!0,yield(yield r.toastController.create({message:'\n        <div class="toast-success">\n          <div class="text">\n            <div class="title">Bom trabalho! Voc\xea conseguiu!</div>\n            <div class="jp">\u3088\u304f\u3067\u304d\u307e\u3057\u305f! </div>\n            <div class="jp">\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059</div>\n          </div>\n        </div>\n      ',icon:"checkmark-circle",duration:5e3,position:"bottom",color:"success",cssClass:"success-toast"})).present()})()}irParaOutraPagina(){this.router.navigate(["/lesson"])}selectOptions(r){this.helpers.play(r),this.clicar(r)}play(r){this.helpers.play(r)}static#o=t=()=>(this.\u0275fac=function(e){return new(e||c)(o.rXU(v.Ix),o.rXU(E.V),o.rXU(q.L),o.rXU(x.K_))},this.\u0275cmp=o.VBU({type:c,selectors:[["app-double"]],standalone:!1,decls:14,vars:4,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/home"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"container"],[4,"ngFor","ngForOf"],["class","helps",4,"ngIf"],[4,"ngIf"],["class","osu",3,"ngClass","top","success","error","left","style","click",4,"ngFor","ngForOf"],[1,"osu",3,"click","ngClass"],[1,"helps"]],template:function(e,s){1&e&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-back-button",2),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Osudake"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),o.EFF(10,"Osudake"),o.k0s()()(),o.j41(11,"div",6),o.DNE(12,G,2,1,"div",7),o.k0s(),o.DNE(13,O,2,1,"h1",8),o.k0s()),2&e&&(o.Y8G("translucent",!0),o.R7$(6),o.Y8G("fullscreen",!0),o.R7$(6),o.Y8G("ngForOf",s.cardsPorEtapa),o.R7$(),o.Y8G("ngIf",s.selectedError.length>1))},dependencies:[d.YU,d.Sq,d.bT,h.QW,h.W9,h.eU,h.BC,h.ai,h.el,d.Jj],styles:[".container[_ngcontent-%COMP%]{position:relative;max-width:400px;width:100%;aspect-ratio:.8;margin:auto}.card[_ngcontent-%COMP%]{position:absolute;width:12vw;max-width:60px;aspect-ratio:1/1;font-size:42px;min-inline-size:32px;display:flex;justify-content:center;align-items:center;font-weight:700;background:#fff;border-radius:4px;-webkit-user-select:none;user-select:none;box-sizing:border-box;cursor:default;color:#000;transform:translate(-50%,-50%)}.red[_ngcontent-%COMP%]{border:3px solid #FFA500!important}.blue[_ngcontent-%COMP%]{border:3px solid #9463f0!important}.osu[_ngcontent-%COMP%]{width:80px;height:80px;cursor:pointer;background-repeat:no-repeat;background-size:cover;background-position:50% 0%;border:4px grey solid;background-color:#fff;background-size:140%;border-radius:20px;position:absolute;transform:translate(-50%,-50%)}.osu.success[_ngcontent-%COMP%]{border:4px #2dd55b solid!important}.osu.error[_ngcontent-%COMP%]{border:4px #f24c58 solid!important}.helps[_ngcontent-%COMP%]{text-transform:uppercase;text-align:center}"]}))}return t(),c})()}];let R=(()=>{var t;class c{static#o=t=()=>(this.\u0275fac=function(e){return new(e||c)},this.\u0275mod=o.$C({type:c}),this.\u0275inj=p.G2t({imports:[f.iI.forChild(A),f.iI]}))}return t(),c})(),j=(()=>{var t;class c{static#o=t=()=>(this.\u0275fac=function(e){return new(e||c)},this.\u0275mod=o.$C({type:c}),this.\u0275inj=p.G2t({imports:[d.MD,b.YN,h.bv,R]}))}return t(),c})()}}]);