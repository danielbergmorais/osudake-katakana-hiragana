"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9288],{9288:(k,g,l)=>{l.r(g),l.d(g,{DoublePageModule:()=>S});var d=l(2200),b=l(4341),n=l(7343),f=l(8132),m=l(467),v=l(3210),o=l(3664),p=l(2615),C=l(2122),E=l(2551),x=l(1554),q=l(2540);function y(c,t){if(1&c){const a=o.RV6();o.j41(0,"div",10),o.nI1(1,"async"),o.bIt("click",function(){const e=p.eBV(a).$implicit,s=o.XpG(3);return p.Njj(s.selectOptions(e.char))}),o.k0s()}if(2&c){const a=t.$implicit,r=o.XpG(3);o.Aen(o.ai1("background-image: url('assets/",o.bMT(1,13,r.type$),"/glyphs/",a.char,".png');")),o.xc7("top",a.top,"%")("left",a.left,"%"),o.AVh("success",r.selected.includes(a.char))("error",r.selectedError.includes(a.char)),o.Y8G("ngClass",a.color)}}function P(c,t){if(1&c&&(o.qex(0),o.DNE(1,y,2,15,"div",9),o.bVm()),2&c){const a=o.XpG().$implicit;o.R7$(),o.Y8G("ngForOf",a)}}function G(c,t){if(1&c&&(o.j41(0,"div"),o.DNE(1,P,2,1,"ng-container",8),o.k0s()),2&c){const a=t.index,r=o.XpG();o.R7$(),o.Y8G("ngIf",a==r.etapaAtual-1)}}const O=[{path:"",component:(()=>{var c;class t{constructor(r,e,s,i){this.router=r,this.helpers=e,this.typeState=s,this.toastController=i,this.selected=[],this.selectedError=[],this.gameOver=!1,this.sequenciasConcluidasNaEtapa=0,this.options=[],this.selectedRed=[],this.selectedBlue=[],this.cards=[],this.cardsPorEtapa=[],this.type$=this.typeState.type$,this.shuffleRed=[],this.shuffleBlue=[],this.sequenciaCorreta=[],this.sequenciaAtualIndex=0,this.etapaAtual=1,this.TOTAL_ETAPAS=5,this.progressoClique=0,this.sequencias=[],this.simpleGrid=[[{char:"\u3046",color:"red",row:2,col:1},{char:"\u3042",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:2,col:3},{char:"\u304a",color:"red",row:4,col:1},{char:"\u3044",color:"red",row:4,col:3}],[{char:"\u3051",color:"blue",row:3,col:1},{char:"\u304b",color:"blue",row:5,col:1},{char:"\u304f",color:"blue",row:4,col:3},{char:"\u304d",color:"blue",row:2,col:2},{char:"\u3053",color:"blue",row:6,col:2}],[{char:"\u3046",color:"red",row:3,col:1},{char:"\u304a",color:"red",row:2,col:2},{char:"\u3044",color:"red",row:4,col:2},{char:"\u3042",color:"red",row:5,col:3},{char:"\u3048",color:"red",row:3,col:3}],[{char:"\u3046",color:"red",row:1,col:2},{char:"\u304a",color:"red",row:3,col:3},{char:"\u3044",color:"red",row:3,col:1},{char:"\u3042",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2}],[{char:"\u3046",color:"red",row:2,col:3},{char:"\u304a",color:"red",row:2,col:1},{char:"\u3044",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2},{char:"\u3042",color:"red",row:4,col:1}]],this.doubleGrid=[[{char:"\u3046",color:"red",row:2,col:1},{char:"\u3048",color:"red",row:2,col:3},{char:"\u3042",color:"red",row:3,col:2},{char:"\u304a",color:"red",row:4,col:1},{char:"\u3044",color:"red",row:7,col:2},{char:"\u3053",color:"blue",row:1,col:2},{char:"\u3051",color:"blue",row:6,col:3},{char:"\u304b",color:"blue",row:4,col:3},{char:"\u304f",color:"blue",row:6,col:1},{char:"\u304d",color:"blue",row:5,col:2}],[{char:"\u3051",color:"blue",row:3,col:1},{char:"\u304b",color:"blue",row:5,col:1},{char:"\u3053",color:"blue",row:6,col:2},{char:"\u304d",color:"blue",row:2,col:2},{char:"\u304f",color:"blue",row:3,col:3},{char:"\u3046",color:"red",row:1,col:1},{char:"\u3042",color:"red",row:7,col:1},{char:"\u3048",color:"red",row:4,col:2},{char:"\u3044",color:"red",row:1,col:3},{char:"\u304a",color:"red",row:5,col:3}],[{char:"\u3046",color:"red",row:1,col:1},{char:"\u304a",color:"red",row:2,col:2},{char:"\u3044",color:"red",row:4,col:2},{char:"\u3042",color:"red",row:5,col:3},{char:"\u3048",color:"red",row:3,col:3},{char:"\u3053",color:"blue",row:3,col:1},{char:"\u3051",color:"blue",row:6,col:1},{char:"\u304b",color:"blue",row:6,col:2},{char:"\u304d",color:"blue",row:1,col:3},{char:"\u304f",color:"blue",row:7,col:3}],[{char:"\u3053",color:"blue",row:1,col:1},{char:"\u3051",color:"blue",row:6,col:1},{char:"\u304b",color:"blue",row:1,col:2},{char:"\u304d",color:"blue",row:7,col:2},{char:"\u304f",color:"blue",row:2,col:3},{char:"\u3046",color:"red",row:4,col:1},{char:"\u304a",color:"red",row:3,col:2},{char:"\u3048",color:"red",row:5,col:2},{char:"\u3044",color:"red",row:4,col:3},{char:"\u3042",color:"red",row:7,col:3}],[{char:"\u3044",color:"red",row:3,col:1},{char:"\u3046",color:"red",row:7,col:3},{char:"\u304a",color:"red",row:1,col:2},{char:"\u3048",color:"red",row:6,col:2},{char:"\u3042",color:"red",row:7,col:1},{char:"\u304d",color:"blue",row:4,col:2},{char:"\u3053",color:"blue",row:2,col:3},{char:"\u3051",color:"blue",row:5,col:3},{char:"\u304b",color:"blue",row:1,col:1},{char:"\u304f",color:"blue",row:5,col:1}]]}ngOnInit(){this.loadOptions(),this.selectedRed.length||this.selectedBlue.length?this.prepareGrid():this.prepareRedGrid(),this.begin()}loadOptions(){const r=localStorage.getItem("options");if(!r)return;this.options=JSON.parse(r);const e=this.options.map(s=>v.S.find(i=>i[0]===s)).filter(s=>!!s);this.selectedRed=e[0]??[],this.selectedBlue=e[1]??[]}prepareRedGrid(){if(!this.selectedRed.length)return;const r=[...this.selectedRed].sort(()=>Math.random()-.5);this.simpleGrid.forEach(e=>{const s=e.slice(0,r.length).map((i,u)=>({...i,char:r[u]}));this.cardsPorEtapa.push(this.generateLayout(s,7,3))})}prepareGrid(){if(!this.selectedRed.length&&!this.selectedBlue.length)return;const r=[...this.selectedRed,...this.selectedBlue].sort(()=>Math.random()-.5);this.cardsPorEtapa=[],this.doubleGrid.forEach((e,s)=>{const i=e.slice(0,r.length).map((u,h)=>{const w=r[h];return{...u,char:w,color:this.selectedRed.includes(w)?"red":"blue"}});this.cardsPorEtapa[s]=this.generateLayout(i,7,3),this.doubleGrid[s].splice(0,this.doubleGrid[s].length,...i)})}generateLayout(r,e,s){const i=100/(e+1),u=100/(s+1);return r.map(h=>({char:h.char,color:h.color,top:Math.round(i*h.row),left:Math.round(u*h.col)}))}selectOptions(r){this.helpers.play(r),this.clicar(r)}play(r){this.helpers.play(r)}begin(){this.sequencias.push(this.selectedRed),this.sequencias.push(this.selectedBlue),this.sequenciaCorreta=this.sequencias[this.sequenciaAtualIndex],this.progressoClique=0}clicar(r){if(this.gameOver)return;const e=this.sequenciaCorreta[this.progressoClique];console.log(`etapa: ${this.etapaAtual}`,`progresso: ${this.progressoClique}`,`esperado: ${e}`,`clicado: ${r}`),r===e?this.tratarAcerto(r):this.tratarErro(r)}tratarAcerto(r){console.log("acertou"),this.selectedError=[],this.progressoClique++,this.marcarComoSelecionado(r),this.removerErroSeExistir(r),this.sequenciaCompleta()&&this.avancarSequencia()}sequenciaCompleta(){return this.progressoClique===this.sequenciaCorreta.length}marcarComoSelecionado(r){this.selected.includes(r)||this.selected.push(r)}removerErroSeExistir(r){this.selectedError=this.selectedError.filter(e=>e!==r)}avancarSequencia(){console.log("sequ\xeancia completa"),this.sequenciasConcluidasNaEtapa++,this.todasSequenciasConcluidas()?this.finalizarEtapa():(this.progressoClique=0,this.proximaSequencia())}todasSequenciasConcluidas(){return this.sequenciasConcluidasNaEtapa===this.sequencias.length}proximaSequencia(){this.sequenciaAtualIndex=(this.sequenciaAtualIndex+1)%this.sequencias.length,this.sequenciaCorreta=this.sequencias[this.sequenciaAtualIndex]}finalizarEtapa(){console.log(`etapa ${this.etapaAtual} finalizada`),this.etapaAtual!==this.TOTAL_ETAPAS?(this.etapaAtual++,this.resetarEstadoEtapa(),this.resetarControleSequencias()):this.finalizarJogo()}resetarControleSequencias(){this.sequenciasConcluidasNaEtapa=0,this.progressoClique=0,this.sequenciaAtualIndex=0,this.sequenciaCorreta=this.sequencias[0]}resetarEstadoEtapa(){this.selected=[],this.selectedError=[]}tratarErro(r){console.log("errou"),!this.selected.includes(r)&&(this.selectedError.includes(r)||this.selectedError.push(r))}finalizarJogo(){var r=this;return(0,m.A)(function*(){r.gameOver=!0,console.log("\u{1f389} Jogo finalizado!"),yield(yield r.toastController.create({message:'\n            <div class="toast-success">\n              <div class="text">\n                <div class="title">Bom trabalho! Voc\xea conseguiu!</div>\n                <div class="jp">\u3088\u304f\u3067\u304d\u307e\u3057\u305f! </div>\n                <div class="jp">\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059</div>\n              </div>\n            </div>\n    ',icon:"checkmark-circle",duration:5e3,position:"bottom",color:"success",cssClass:"success-toast"})).present()})()}irParaOutraPagina(){this.router.navigate(["/lesson"])}static#o=c=()=>(this.\u0275fac=function(e){return new(e||t)(o.rXU(C.Ix),o.rXU(E.V),o.rXU(x.L),o.rXU(q.K_))},this.\u0275cmp=o.VBU({type:t,selectors:[["app-double"]],standalone:!1,decls:13,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/home"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","osu",3,"ngClass","top","success","error","left","style","click",4,"ngFor","ngForOf"],[1,"osu",3,"click","ngClass"]],template:function(e,s){1&e&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o.nrm(3,"ion-back-button",2),o.k0s(),o.j41(4,"ion-title"),o.EFF(5,"Osudake"),o.k0s()()(),o.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),o.EFF(10,"Osudake"),o.k0s()()(),o.j41(11,"div",6),o.DNE(12,G,2,1,"div",7),o.k0s()()),2&e&&(o.Y8G("translucent",!0),o.R7$(6),o.Y8G("fullscreen",!0),o.R7$(6),o.Y8G("ngForOf",s.cardsPorEtapa))},dependencies:[d.YU,d.Sq,d.bT,n.QW,n.W9,n.eU,n.BC,n.ai,n.el,d.Jj],styles:[".container[_ngcontent-%COMP%]{position:relative;max-width:400px;width:100%;aspect-ratio:.8;margin:auto}.card[_ngcontent-%COMP%]{position:absolute;width:12vw;max-width:60px;aspect-ratio:1/1;font-size:42px;min-inline-size:32px;display:flex;justify-content:center;align-items:center;font-weight:700;background:#fff;border-radius:4px;-webkit-user-select:none;user-select:none;box-sizing:border-box;cursor:default;color:#000;transform:translate(-50%,-50%)}.red[_ngcontent-%COMP%]{border:3px solid #FFA500!important}.blue[_ngcontent-%COMP%]{border:3px solid #9463f0!important}.osu[_ngcontent-%COMP%]{width:80px;height:80px;cursor:pointer;background-repeat:no-repeat;background-size:cover;background-position:50% 0%;border:4px grey solid;background-color:#fff;background-size:140%;border-radius:20px;position:absolute;transform:translate(-50%,-50%)}.osu.success[_ngcontent-%COMP%]{border:4px #2dd55b solid!important}.osu.error[_ngcontent-%COMP%]{border:4px #f24c58 solid!important}"]}))}return c(),t})()}];let A=(()=>{var c;class t{static#o=c=()=>(this.\u0275fac=function(e){return new(e||t)},this.\u0275mod=o.$C({type:t}),this.\u0275inj=p.G2t({imports:[f.iI.forChild(O),f.iI]}))}return c(),t})(),S=(()=>{var c;class t{static#o=c=()=>(this.\u0275fac=function(e){return new(e||t)},this.\u0275mod=o.$C({type:t}),this.\u0275inj=p.G2t({imports:[d.MD,b.YN,n.bv,A]}))}return c(),t})()}}]);